<dom-module id=app-sidebar>
    <link href="../../dist/css/components/app-sidebar.css" rel="stylesheet" inline>
    <template>
        <a href="{{siteSettings.site_url}}">{{siteSettings.site_name}}</a>
        <content></content>
    </template>
    <script>
        Polymer({
            is: "app-sidebar",
            extends: "nav",
            properties: {
                siteSettings: {
                    type: Object,
                    value: function() {
                       return {};
                    },
                    notify: true
                }
            },
            ready: function () {
                window.App.updateElements(Polymer.dom(this.root));
                if(window.indigo) {
                    this.set('siteSettings', window.indigo);
                }
            },
            attached: function () {
                window.App.captureLinks();
                window.App.animateElement(this);

                var sidebar = this;
                // Toggle when mobile view
                var mql = window.matchMedia("(max-width: 575px)");
                mql.addListener(function() {
                    if(mql.matches) {
                        var direction = (sidebar.classList.contains('right-sidebar')) ? 'translateX(100%)' : 'translateX(-100%)';
                        delete sidebar.dataset.animate;
                        sidebar.style.willChange = 'transform';
                        sidebar.style.transform = direction;
                        sidebar.style.willChange = 'auto';
                    } else {
                        delete sidebar.dataset.animate;
                        sidebar.style.willChange = 'transform';
                        sidebar.style.transform = 'translateX(0)';
                        sidebar.style.willChange = 'auto';
                    }
                });
                console.log(mql);
            }
        });
    </script>
</dom-module>